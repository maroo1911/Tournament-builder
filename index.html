<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Tournament Creator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: #FFFFFF;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 10px;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: none;
            background-color: #282828;
            color: #FFFFFF;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border: 1px solid #1DB954;
        }
        .btn {
            background-color: #1DB954;
            color: #FFFFFF;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .btn:hover {
            background-color: #1ed760;
        }
        .results, .matches-page, .group-table {
            margin-top: 20px;
        }
        .group {
            margin-bottom: 20px;
        }
        .group h2 {
            font-size: 20px;
            margin-bottom: 10px;
        }
        .match {
            background-color: #282828;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .nav {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        .nav a {
            color: #1DB954;
            text-decoration: none;
            font-weight: bold;
        }
        .nav a.active {
            color: #FFFFFF;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #555;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold mb-6">Football Tournament Creator</h1>
        
        <!-- Navigation Links -->
        <div class="nav">
            <a href="#" onclick="showPage('tournament-creator')">Tournament Creator</a>
            <a href="#" onclick="showPage('group-table')">Group Table</a>
            <a href="#" onclick="showPage('matches-page')">Matches</a>
        </div>

        <!-- Tournament Creator Page -->
        <div id="tournament-creator" class="page">
            <div class="form-group">
                <label for="numTeams">Number of Teams:</label>
                <input type="number" id="numTeams" min="2" required>
            </div>
            <div class="form-group">
                <label for="numGroups">Number of Groups:</label>
                <input type="number" id="numGroups" min="1" required>
            </div>
            <div class="form-group">
                <label for="numMatches">Number of Matches per Team in Group:</label>
                <input type="number" id="numMatches" min="1" required>
            </div>
            <button class="btn" onclick="createTournament()">Create Tournament</button>
            <div class="results" id="results"></div>
        </div>

        <!-- Group Table Page -->
        <div id="group-table" class="page" style="display: none;">
            <h2 class="text-2xl mb-4">Group Table</h2>
            <div id="groupTable"></div>
        </div>

        <!-- Matches Page -->
        <div id="matches-page" class="page" style="display: none;">
            <h2 class="text-2xl mb-4">Upcoming Matches</h2>
            <div id="matchesList"></div>
        </div>
    </div>

    <script>
        let groups = [];
        let matches = [];
        let teamStats = [];

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById(pageId).style.display = 'block';
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createTournament() {
            const numTeams = parseInt(document.getElementById('numTeams').value);
            const numGroups = parseInt(document.getElementById('numGroups').value);
            const numMatches = parseInt(document.getElementById('numMatches').value);

            if (isNaN(numTeams) || isNaN(numGroups) || isNaN(numMatches) || numTeams < 2 || numGroups < 1 || numMatches < 1) {
                alert('Please enter valid numbers.');
                return;
            }

            const teams = Array.from({ length: numTeams }, (_, i) => `Team ${i + 1}`);
            const shuffledTeams = shuffle(teams);
            groups = Array.from({ length: numGroups }, () => []);
            teamStats = teams.map(team => ({
                name: team,
                played: 0, wins: 0, losses: 0, draws: 0, goalsFor: 0, goalsAgainst: 0, points: 0
            }));

            shuffledTeams.forEach((team, index) => {
                groups[index % numGroups].push(team);
            });

            generateGroupTable();
            generateMatches(numMatches);
        }

        function generateGroupTable() {
            const groupTableDiv = document.getElementById('groupTable');
            groupTableDiv.innerHTML = '';

            groups.forEach((group, index) => {
                const groupDiv = document.createElement('div');
                groupDiv.classList.add('group');
                groupDiv.innerHTML = `<h3>Group ${index + 1}</h3>`;
                
                const table = document.createElement('table');
                table.innerHTML = `
                    <tr>
                        <th>Team</th><th>Played</th><th>Wins</th><th>Losses</th><th>Draws</th>
                        <th>Goals For</th><th>Goals Against</th><th>Goal Diff</th><th>Points</th>
                    </tr>
                `;
                group.forEach(teamName => {
                    const team = teamStats.find(t => t.name === teamName);
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><input type="text" value="${team.name}" onchange="updateTeamName('${team.name}', this.value)"/></td>
                        <td>${team.played}</td><td>${team.wins}</td><td>${team.losses}</td><td>${team.draws}</td>
                        <td>${team.goalsFor}</td><td>${team.goalsAgainst}</td><td>${team.goalsFor - team.goalsAgainst}</td>
                        <td>${team.points}</td>
                    `;
                    table.appendChild(row);
                });
                groupDiv.appendChild(table);
                groupTableDiv.appendChild(groupDiv);
            });
        }

        function updateTeamName(oldName, newName) {
            const team = teamStats.find(t => t.name === oldName);
            team.name = newName;
            generateMatches(document.getElementById('numMatches').value);
            generateGroupTable();
        }

        function generateMatches(numMatches) {
            matches = [];
            groups.forEach(group => {
                for (let i = 0; i < group.length; i++) {
                    for (let j = i + 1; j < group.length; j++) {
                        matches.push({
                            teamA: group[i],
                            teamB: group[j],
                            finished: false,
                            goalsA: 0,
                            goalsB: 0
                        });
                    }
                }
            });
            displayMatches();
        }

        function displayMatches() {
            const matchesListDiv = document.getElementById('matchesList');
            matchesListDiv.innerHTML = '';
            
            matches.forEach((match, index) => {
                const matchDiv = document.createElement('div');
                matchDiv.classList.add('match');
                matchDiv.innerHTML = `
                    ${match.teamA} vs ${match.teamB} 
                    <input type="number" min="0" value="${match.goalsA}" onchange="updateMatchResult(${index}, 'A', this.value)"/> - 
                    <input type="number" min="0" value="${match.goalsB}" onchange="updateMatchResult(${index}, 'B', this.value)"/>
                    <button onclick="finalizeMatch(${index})">Finalize</button>
                `;
                matchesListDiv.appendChild(matchDiv);
            });
        }

        function updateMatchResult(index, team, value) {
            if (team === 'A') matches[index].goalsA = parseInt(value) || 0;
            else matches[index].goalsB = parseInt(value) || 0;
        }

        function finalizeMatch(index) {
            const match = matches[index];
            if (match.finished) return;
            
            match.finished = true;
            const teamA = teamStats.find(t => t.name === match.teamA);
            const teamB = teamStats.find(t => t.name === match.teamB);

            teamA.played += 1;
            teamB.played += 1;
            teamA.goalsFor += match.goalsA;
            teamA.goalsAgainst += match.goalsB;
            teamB.goalsFor += match.goalsB;
            teamB.goalsAgainst += match.goalsA;

            if (match.goalsA > match.goalsB) {
                teamA.wins += 1;
                teamB.losses += 1;
                teamA.points += 3;
            } else if (match.goalsA < match.goalsB) {
                teamB.wins += 1;
                teamA.losses += 1;
                teamB.points += 3;
            } else {
                teamA.draws += 1;
                teamB.draws += 1;
                teamA.points += 1;
                teamB.points += 1;
            }

            generateGroupTable();
            displayMatches();
        }
    </script>
</body>
</html>
